<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Contact — Smart Link Shortener</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="contact.css" />
  <link rel="stylesheet" href="style.css" />
   <!-- Favicon -->
  <link rel="icon" href="smartlink-logo.svg" />
</head>
<body>
  <!-- START: shared header -->
  <header class="header site-header">
    <div class="nav-container nav-wrap">
      <a class="logo brand" href="index.html" aria-label="Smart Link home">
        <svg width="35" height="35" viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="grad" x1="0" x2="1">
              <stop offset="0" stop-color="#007bff"/>
              <stop offset="1" stop-color="#00c6ff"/>
            </linearGradient>
          </defs>
          <rect x="3" y="3" width="18" height="18" rx="5" fill="url(#grad)" />
          <path d="M7.8 13.5a3.8 3.8 0 0 1 0-5.4l1.2-1.2" stroke="#fff" stroke-width="1.2" fill="none" />
          <path d="M16.2 10.5a3.8 3.8 0 0 1 0 5.4l-1.2 1.2" stroke="#fff" stroke-width="1.2" fill="none" />
        </svg>
        <span class="brand-text">Smart Link</span>
      </a>

      <nav class="main-nav" id="mainNav" aria-label="Main navigation">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
         
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
        <a href="blogs.html">Blogs</a>
      </nav>

      <button class="mobile-toggle" id="mobileToggle" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">
        <span class="hamburger" aria-hidden="true">
          <span class="bar bar-1"></span>
          <span class="bar bar-2"></span>
          <span class="bar bar-3"></span>
        </span>
      </button>
    </div>
  </header>
  <!-- END: shared header -->

  <main class="page">
    <section class="content-grid card-grid">
      <article class="card form-card">
        <h1>Contact Us</h1>
        <p class="lead">Questions, feature requests or support — send us a message and we’ll reply as soon as possible.</p>

        <form id="contactForm" class="contact-form" autocomplete="off">
          <label for="name">Name *</label>
          <input id="name" name="name" type="text" required />

          <label for="email">Email *</label>
          <input id="email" name="email" type="email" required />

          <label for="subject">Subject</label>
          <input id="subject" name="subject" type="text" />

          <label for="message">Message *</label>
          <textarea id="message" name="message" rows="6" required></textarea>

          <div class="form-actions">
            <button type="submit">Send Message</button>
            <button type="button" id="emailSupportBtn" class="secondary">Email Support</button>
          </div>

          <div id="contactResult" class="note"></div>
        </form>
      </article>

      <aside class="card info-card">
        <h3>Other ways to reach us</h3>
        <p class="small">Email: <a class="link" href="mailto:mdehtisham2019@gmail.com">mdehtisham2019@gmail.com</a></p>
        <p class="small">We generally reply within 1–2 business days.</p>
      </aside>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div>© <span id="year-contact"></span>SmartLink</div>
      <div class="small"><a href="/privacy.html">Privacy</a></div>
    </div>
  </footer>

  <script>document.getElementById('year-contact').textContent=new Date().getFullYear();</script>

  <script>
    // Contact form submit handler: send JSON to /api/contact
    (function () {
      const form = document.getElementById('contactForm');
      const result = document.getElementById('contactResult');
      if (!form) return;

      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        result.textContent = '';
        result.style.color = '#666';

        const name = (form.name.value || '').trim();
        const email = (form.email.value || '').trim();
        const subject = (form.subject.value || '').trim();
        const message = (form.message.value || '').trim();

        if (!name || !email || !message) {
          result.style.color = '#c0392b';
          result.textContent = 'Please fill name, email and message.';
          return;
        }

        try {
          const res = await fetch('https://linkshortner.site/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, subject, message })
          });

          const data = await res.json().catch(() => ({}));
          if (!res.ok) {
            result.style.color = '#c0392b';
            result.textContent = data && data.error ? data.error : 'Failed to send message.';
            console.error('Contact error', res.status, data);
            return;
          }

          result.style.color = '#0b8a4b';
          result.textContent = 'Message sent — thank you!';
          // clear form
          form.reset();
        } catch (err) {
          console.error('Contact submit failed', err);
          result.style.color = '#c0392b';
          result.textContent = 'Network error — please try again.';
        }
      });
    })();

    // Email Support button with fallback
    (function () {
      const btn = document.getElementById('emailSupportBtn');
      if (!btn) return;
      const supportEmail = 'mdehtisham2019@gmail.com';

      function encodeForMail(text) { return encodeURIComponent(text || ''); }

      btn.addEventListener('click', function () {
        // try to use values from form if available
        const name = (document.getElementById('name')||{}).value || '';
        const subject = (document.getElementById('subject')||{}).value || 'Support request from website';
        const message = (document.getElementById('message')||{}).value || '';

        const body = `${name ? name + '\n\n' : ''}${message}`;
        const mailto = `mailto:${supportEmail}?subject=${encodeForMail(subject)}&body=${encodeForMail(body)}`;

        // Create a temporary anchor and click it to trigger the mail client
        try {
          const a = document.createElement('a');
          a.href = mailto;
          a.style.display = 'none';
          // Use target=_self to avoid some browsers opening a search tab
          a.target = '_self';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        } catch (err) {
          console.warn('Failed to open mailto via anchor click:', err);
        }

        // Show inline fallback message with a copy button so users who don't have
        // a mail client configured can still contact support without a confusing alert.
        const note = document.getElementById('contactResult');
        if (note) {
          note.style.color = '#0b6bff';
          note.innerHTML = `If your mail app didn't open, <button id="copySupportBtn">Copy support email</button>`;
          const copyBtn = document.getElementById('copySupportBtn');
          copyBtn.addEventListener('click', async function () {
            try {
              await navigator.clipboard.writeText(supportEmail);
              note.textContent = 'Support email copied to clipboard.';
              note.style.color = '#0b8a4b';
              setTimeout(() => { note.textContent = ''; }, 5000);
            } catch (e) {
              // fallback: set plain text so user can copy manually
              note.textContent = 'Please contact us at ' + supportEmail;
              setTimeout(() => { note.textContent = ''; }, 7000);
            }
          });
          // auto-clear fallback after some time
          setTimeout(() => { if (note) note.textContent = ''; }, 9000);
        } else {
          // as a last resort, copy the address to clipboard
          if (navigator.clipboard) navigator.clipboard.writeText(supportEmail).catch(()=>{});
        }
      });
    })();
  </script>

  <!-- Mobile panel (one per page) -->
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
    <div class="mobile-menu-panel" role="dialog" aria-modal="true" aria-label="Mobile menu">
      <div class="mobile-panel-head" style="display:flex;align-items:center;gap:12px;">
        <svg width="32" height="32" viewBox="0 0 24 24" aria-hidden="true">
          <defs><linearGradient id="gM" x1="0" x2="1"><stop offset="0" stop-color="#007bff"/><stop offset="1" stop-color="#00c6ff"/></linearGradient></defs>
          <rect x="3" y="3" width="18" height="18" rx="5" fill="url(#gM)"/>
        </svg>
        <strong style="font-size:18px;color:#07293f;">Smart Link</strong>
      </div>

      <nav class="mobile-menu-nav" aria-label="mobile navigation">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
        <a href="blogs.html">Blogs</a>
      </nav>

      <div class="mobile-menu-footer">
        <button id="mobileClose" class="btn-ghost" aria-label="Close menu">Close</button>
      </div>
    </div>

    <div class="mobile-menu-backdrop" id="mobileBackdrop" tabindex="-1" aria-hidden="true"></div>
  </div>

  <!-- your app logic (unchanged) -->
  <script src="script.js"></script>
  <!-- global site UI helpers -->
  <script src="site.js"></script>
</body>
</html>
